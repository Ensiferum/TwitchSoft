apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-telegrambot
spec:
  replicas: 1
  selector:
    matchLabels:
      app: ts-telegrambot
  template:
    metadata:
      labels:
        app: ts-telegrambot
    spec:
      nodeSelector: 
        "beta.kubernetes.io/os": linux
      containers:
      - name: ts-telegrambot
        image: twitchsoft.azurecr.io/twitchsofttelegrambot:latest
        imagePullPolicy: Always
        resources:
          limits:
            memory: 150Mi
          requests:
            memory: 80Mi
        envFrom:
          - secretRef:
              name: ts-secret
          - configMapRef:
              name: log-config
---
apiVersion: v1
kind: Service
metadata:
  name: ts-telegrambot
spec:
  ports:
  - port: 80
  selector:
    app: ts-telegrambot
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-twitchbot
spec:
  replicas: 1
  selector:
    matchLabels:
      app: ts-twitchbot
  template:
    metadata:
      labels:
        app: ts-twitchbot
    spec:
      nodeSelector: 
        "beta.kubernetes.io/os": linux
      containers:
      - name: ts-twitchbot
        image: twitchsoft.azurecr.io/twitchsofttwitchbot:latest
        imagePullPolicy: Always
        resources:
          limits:
            memory: 200Mi
          requests:
            memory: 150Mi
        envFrom:
          - secretRef:
              name: ts-secret
          - configMapRef:
              name: log-config
---
apiVersion: v1
kind: Service
metadata:
  name: ts-twitchbot
spec:
  ports:
  - port: 80
  selector:
    app: ts-twitchbot
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-maintenance
spec:
  replicas: 1
  selector:
    matchLabels:
      app: ts-maintenance
  template:
    metadata:
      labels:
        app: ts-maintenance
    spec:
      nodeSelector: 
        "beta.kubernetes.io/os": linux
      containers:
      - name: ts-maintenance
        image: twitchsoft.azurecr.io/twitchsoftmaintenance:latest
        imagePullPolicy: Always
        resources:
          limits:
            memory: 180Mi
          requests:
            memory: 150Mi
        envFrom:
          - secretRef:
              name: ts-secret
          - configMapRef:
              name: log-config
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-servicebusprocessor
spec:
  replicas: 1
  selector:
    matchLabels:
      app: ts-servicebusprocessor
  template:
    metadata:
      labels:
        app: ts-servicebusprocessor
    spec:
      nodeSelector: 
        "beta.kubernetes.io/os": linux
      containers:
      - name: ts-servicebusprocessor
        image: twitchsoft.azurecr.io/twitchsoftservicebusprocessor:latest
        imagePullPolicy: Always
        resources:
          limits:
            memory: 250Mi
          requests:
            memory: 150Mi
        envFrom:
          - secretRef:
              name: ts-secret
          - configMapRef:
              name: log-config
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-twitchbotorchestrator
spec:
  replicas: 1
  selector:
    matchLabels:
      app: ts-twitchbotorchestrator
  template:
    metadata:
      labels:
        app: ts-twitchbotorchestrator
    spec:
      nodeSelector: 
        "beta.kubernetes.io/os": linux
      containers:
      - name: ts-twitchbotorchestrator
        image: twitchsoft.azurecr.io/twitchsofttwitchbotorchestrator:latest
        imagePullPolicy: Always
        resources:
          limits:
            memory: 200Mi
          requests:
            memory: 150Mi
        envFrom:
          - secretRef:
              name: ts-secret
          - configMapRef:
              name: log-config
---
apiVersion: v1
kind: Service
metadata:
  name: ts-twitchbotorchestrator
spec:
  ports:
  - port: 80
  selector:
    app: ts-twitchbotorchestrator