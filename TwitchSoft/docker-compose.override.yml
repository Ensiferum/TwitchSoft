version: '3.7'

services:
  twitchsoft.telegrambot:
    environment:
      - DOTNET_ENVIRONMENT=Development
      - ConnectionStrings__TwitchDbContext=Server=host.docker.internal;Database=TwitchDb;User Id=sa;Password=BigPassw0rd;Connection Timeout=120
      - Redis__ConnectionString=host.docker.internal
      - Elasticsearch__Url=http://host.docker.internal:9200/
    volumes:
      - ${APPDATA}/Microsoft/UserSecrets:/root/.microsoft/usersecrets:ro

  twitchsoft.twitchbot:
    environment:
      - DOTNET_ENVIRONMENT=Development
      - ConnectionStrings__TwitchDbContext=Server=host.docker.internal;Database=TwitchDb;User Id=sa;Password=BigPassw0rd;Connection Timeout=120
      - ServiceBusSettings__Host=host.docker.internal
      - Redis__ConnectionString=host.docker.internal
    volumes:
      - ${APPDATA}/Microsoft/UserSecrets:/root/.microsoft/usersecrets:ro

  twitchsoft.servicebusprocessor:
    environment:
      - DOTNET_ENVIRONMENT=Development
      - ConnectionStrings__TwitchDbContext=Server=host.docker.internal;Database=TwitchDb;User Id=sa;Password=BigPassw0rd;Connection Timeout=120
      - ServiceBusSettings__Host=host.docker.internal
      - Redis__ConnectionString=host.docker.internal
      - Elasticsearch__Url=http://host.docker.internal:9200/
    volumes:
      - ${APPDATA}/Microsoft/UserSecrets:/root/.microsoft/usersecrets:ro

  twitchsoft.maintenance:
    environment:
      - DOTNET_ENVIRONMENT=Development
      - ConnectionStrings__TwitchDbContext=Server=host.docker.internal;Database=TwitchDb;User Id=sa;Password=BigPassw0rd;Connection Timeout=120
    volumes:
      - ${APPDATA}/Microsoft/UserSecrets:/root/.microsoft/usersecrets:ro
